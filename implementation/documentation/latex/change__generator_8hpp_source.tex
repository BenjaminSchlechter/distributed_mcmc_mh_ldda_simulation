\hypertarget{change__generator_8hpp_source}{}\doxysection{change\+\_\+generator.\+hpp}
\label{change__generator_8hpp_source}\index{metropolis\_hastings/configuration/change\_generator.hpp@{metropolis\_hastings/configuration/change\_generator.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00001}00001 \textcolor{preprocessor}{\#ifndef CHANGE\_GENERATOR\_HPP}}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00002}00002 \textcolor{preprocessor}{\#define CHANGE\_GENERATOR\_HPP}}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00003}00003 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00004}00004 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00005}00005 \textcolor{preprocessor}{\#include <random>}}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00006}00006 \textcolor{preprocessor}{\#include <cassert>}}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00007}00007 \textcolor{preprocessor}{\#include <sstream>}}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00008}00008 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00009}00009 \textcolor{preprocessor}{\#include "{}../../util/basic\_serialization.hpp"{}}}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00010}00010 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00011}00011 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00013}00013 \textcolor{keyword}{template}<\textcolor{keyword}{typename} \textcolor{keywordtype}{size\_t}ype, \textcolor{keyword}{typename} value\_t>}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00014}\mbox{\hyperlink{structchange}{00014}} \textcolor{keyword}{struct }\mbox{\hyperlink{structchange}{change}} \{}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00016}\mbox{\hyperlink{structchange_aede330c9266bd27be2adeb2b4ef2849f}{00016}}     size\_type \mbox{\hyperlink{structchange_aede330c9266bd27be2adeb2b4ef2849f}{index}};}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00017}00017 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00019}\mbox{\hyperlink{structchange_ac57d2bb0eca20a7d04a1a99abcbc302d}{00019}}     value\_t \mbox{\hyperlink{structchange_ac57d2bb0eca20a7d04a1a99abcbc302d}{new\_value}};}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00020}00020 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00022}\mbox{\hyperlink{structchange_a32703d605d346159b1b0a450f4fc9d92}{00022}}     \textcolor{keyword}{auto} \mbox{\hyperlink{structchange_a32703d605d346159b1b0a450f4fc9d92}{operator==}}(\textcolor{keyword}{const} \mbox{\hyperlink{structchange}{change<size\_type, value\_t>}} \&rhs)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00023}00023         \textcolor{keywordflow}{return} (\mbox{\hyperlink{structchange_aede330c9266bd27be2adeb2b4ef2849f}{index}} == rhs.\mbox{\hyperlink{structchange_aede330c9266bd27be2adeb2b4ef2849f}{index}}) \&\& (\mbox{\hyperlink{structchange_ac57d2bb0eca20a7d04a1a99abcbc302d}{new\_value}} == rhs.\mbox{\hyperlink{structchange_ac57d2bb0eca20a7d04a1a99abcbc302d}{new\_value}});}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00024}00024     \}}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00025}00025 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00027}\mbox{\hyperlink{structchange_a90023ee06a4b800d6ac819888d23f1e2}{00027}}     \textcolor{keyword}{auto} \mbox{\hyperlink{structchange_a90023ee06a4b800d6ac819888d23f1e2}{operator!=}}(\textcolor{keyword}{const} \mbox{\hyperlink{structchange}{change<size\_type, value\_t>}} \&rhs)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00028}00028         \textcolor{keywordflow}{return} (*\textcolor{keyword}{this} == rhs);}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00029}00029     \}}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00030}00030 \};}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00031}00031 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00032}00032 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00034}00034 \textcolor{keyword}{template} <}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00035}00035     \textcolor{keyword}{typename} \mbox{\hyperlink{structbinary__configuration__vector}{cfg\_vector\_t}},}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00036}00036     \textcolor{keywordtype}{bool} enforce\_change,}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00037}00037 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00038}00038     \textcolor{keyword}{typename} value\_t = std::conditional<}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00039}00039         std::is\_same<bool, typename cfg\_vector\_t::value\_type>::value,}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00040}00040         short,}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00041}00041         \textcolor{keyword}{typename} \mbox{\hyperlink{structbinary__configuration__vector_ad98eb7982e4bfc0f0fdd89335a4344ea}{cfg\_vector\_t::value\_type}}}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00042}00042     >::type,}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00043}00043 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00044}00044     \textcolor{keyword}{typename} value\_distr\_type = std::uniform\_int\_distribution<value\_t>,}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00045}00045 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00046}00046     \textcolor{keyword}{decltype}(value\_distr\_type().min()) value\_distr\_minv}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00047}00047         = \mbox{\hyperlink{structbinary__configuration__vector_af1720c1598dc0e47f1e54554e300715f}{cfg\_vector\_t::min\_value}},}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00048}00048 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00049}00049     \textcolor{keyword}{decltype}(value\_distr\_type().max()) value\_distr\_maxv}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00050}00050         = enforce\_change ?}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00051}00051             \mbox{\hyperlink{structbinary__configuration__vector_a6a89955592dbe58c3bca419657242909}{cfg\_vector\_t::max\_value}} -\/ 1 :}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00052}00052             \mbox{\hyperlink{structbinary__configuration__vector_a6a89955592dbe58c3bca419657242909}{cfg\_vector\_t::max\_value}}}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00053}00053 >}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00054}\mbox{\hyperlink{classsimple__change__generator}{00054}} \textcolor{keyword}{class} \mbox{\hyperlink{classsimple__change__generator}{simple\_change\_generator}}}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00055}00055 \{}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00056}00056     \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00057}00057         \textcolor{keyword}{constexpr} \textcolor{keyword}{static} \textcolor{keywordtype}{bool} is\_change\_generator = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00058}00058         \textcolor{keyword}{using} index\_t = \mbox{\hyperlink{structbinary__configuration__vector_a89ab02ceefc7415d223608a6a41dda29}{cfg\_vector\_t::size\_type}};}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00059}00059 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00060}00060     \textcolor{keyword}{private}:}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00062}\mbox{\hyperlink{classsimple__change__generator_a2dcffacf8c06cc4a98935129b3ab6a02}{00062}}         std::uniform\_int\_distribution<index\_t> \mbox{\hyperlink{classsimple__change__generator_a2dcffacf8c06cc4a98935129b3ab6a02}{index\_distr}};}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00063}00063 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00065}\mbox{\hyperlink{classsimple__change__generator_af01aec977be46e04c977ee02d1c22139}{00065}}         value\_distr\_type \mbox{\hyperlink{classsimple__change__generator_af01aec977be46e04c977ee02d1c22139}{value\_distr}};}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00066}00066 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00067}00067     \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00068}00068         std::string get\_description() \{}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00069}00069             \textcolor{keywordflow}{return} enforce\_change ? \textcolor{stringliteral}{"{}scg-\/ec"{}} : \textcolor{stringliteral}{"{}scg-\/ac"{}};}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00070}00070         \}}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00071}00071 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00073}\mbox{\hyperlink{classsimple__change__generator_a1e1b50e86e18464c7b396e5316563801}{00073}}         \mbox{\hyperlink{classsimple__change__generator_a1e1b50e86e18464c7b396e5316563801}{simple\_change\_generator}}(\textcolor{keyword}{const} \mbox{\hyperlink{structbinary__configuration__vector}{cfg\_vector\_t}} \&v) :}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00074}00074             index\_distr(0, v.data.size() -\/ 1),}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00075}00075             value\_distr(value\_distr\_minv, value\_distr\_maxv)}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00076}00076         \{}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00077}00077             assert(0 < v.\mbox{\hyperlink{structbinary__configuration__vector_a70b954e819ce63870f9bf44e9aec8737}{data}}.size());}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00078}00078             \textcolor{keyword}{static\_assert}(}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00079}00079                 \mbox{\hyperlink{structbinary__configuration__vector_af1720c1598dc0e47f1e54554e300715f}{cfg\_vector\_t::min\_value}} < \mbox{\hyperlink{structbinary__configuration__vector_a6a89955592dbe58c3bca419657242909}{cfg\_vector\_t::max\_value}});}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00080}00080         \}}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00081}00081 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00083}\mbox{\hyperlink{classsimple__change__generator_aef041b2fc87b9e7b4e5515b91a15a6bf}{00083}}         \textcolor{keyword}{auto} \mbox{\hyperlink{classsimple__change__generator_aef041b2fc87b9e7b4e5515b91a15a6bf}{operator()}}(\textcolor{keyword}{auto} \&prng, \textcolor{keyword}{const} \mbox{\hyperlink{structbinary__configuration__vector}{cfg\_vector\_t}} \&v)}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00084}00084         \{}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00085}00085             index\_t index = index\_distr(prng);}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00086}00086             value\_t value = value\_distr(prng);}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00087}00087 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00088}00088             \textcolor{keywordflow}{if} \textcolor{keyword}{constexpr}(enforce\_change) \{}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00089}00089                 \textcolor{keywordflow}{if} (value >= v.\mbox{\hyperlink{structbinary__configuration__vector_a70b954e819ce63870f9bf44e9aec8737}{data}}[index]) \{}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00090}00090                     value++;}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00091}00091                 \}}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00092}00092             \}}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00093}00093 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00094}00094             \textcolor{keywordflow}{return} \mbox{\hyperlink{structchange}{change<index\_t, typename cfg\_vector\_t::value\_type>}}\{}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00095}00095                 index,}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00096}00096                 \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{structbinary__configuration__vector_ad98eb7982e4bfc0f0fdd89335a4344ea}{cfg\_vector\_t::value\_type}}\textcolor{keyword}{>}(value)}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00097}00097             \};}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00098}00098         \}}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00099}00099 \};}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00100}00100 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00101}00101 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00103}00103 \textcolor{keyword}{template} <\textcolor{keyword}{typename} S, \textcolor{keyword}{typename} simple\_change\_generator\_t>}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00104}00104     \textcolor{keyword}{requires} (simple\_change\_generator\_t::is\_change\_generator)}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00105}00105 \textcolor{keywordtype}{void} serialize(S\& s, simple\_change\_generator\_t \&change\_gen) \{}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00106}00106     std::string descr = change\_gen.get\_description();}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00107}00107     s.text1b(descr, 7);}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00108}00108     assert(6 == descr.length());}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00109}00109     assert(change\_gen.get\_description() == descr);}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00110}00110 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00111}00111     std::stringstream sstr;}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00112}00112     sstr << change\_gen.index\_distr;}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00113}00113     sstr << change\_gen.value\_distr;}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00114}00114     std::string distributions = sstr.str();}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00115}00115     assert(!sstr.fail());}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00116}00116 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00117}00117     generic\_serialize(s, distributions);}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00118}00118 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00119}00119     sstr.str(distributions);}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00120}00120     sstr >> change\_gen.index\_distr;}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00121}00121     sstr >> change\_gen.value\_distr;}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00122}00122     assert(!sstr.fail());}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00123}00123     assert(sstr.eof());}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00124}00124 \}}
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00125}00125 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00126}00126 }
\DoxyCodeLine{\Hypertarget{change__generator_8hpp_source_l00127}00127 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
